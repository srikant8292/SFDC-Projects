<template>
    <div class="slds-var-p-around_large">
      <lightning-spinner alternative-text="Loading" size="small" if:true={isSpinner}></lightning-spinner>
      <template if:true={eventDetails}>
        <div class="slds-var-p-around_large eventTitle">
           <p><strong>{eventDetails.Name__c}</strong></p>
        </div>

        <div class="slds-var-p-around_large eventRsvp">
          <lightning-layout multiple-rows="true">
           <lightning-layout-item  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
            <p>This Event is Accepting RSVP and LastDate to RSVP is</p> 

            </lightning-layout-item>
            <lightning-layout-item  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
              <p><lightning-formatted-date-time value={eventDetails.Start_DateTime__c} year="numeric" month="numeric" day="numeric" hour="2-digit"
                minute="2-digit" time-zone="UTC" time-zone-name="short" hour12={ampm}></lightning-formatted-date-time></p>

            </lightning-layout-item>
            <lightning-layout-item  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
  
                <lightning-button variant="brand" label="RSVP Now" title="RSVP Now" onclick={rsvpHandler}></lightning-button>
            
             

            </lightning-layout-item>
          </lightning-layout>
        </div>

        <div class="slds-var-p-around_large details">
          <lightning-formatted-rich-text value={eventDetails.Event_Details__c}>

          </lightning-formatted-rich-text>
        </div>

        <lightning-layout multiple-rows="true">
          <lightning-layout-item  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
            <div class="slds-var-p-around_large location">
              <template if:false={eventDetails.Location__c}>
                <strong>This is a Virtual Event So Location is available</strong>
              </template>
              <template if:true={eventDetails.Location__c}>
                <strong>Event Location </strong>
                <lightning-formatted-address 
                street={eventDetails.Location__r.Street__c}
                city={eventDetails.Location__r.City__c}
                province={eventDetails.Location__r.State__c}
                country={eventDetails.Location__r.Country__c}
                postal-code={eventDetails.Location__r.Postal_Code__c}>
    
                </lightning-formatted-address>
    
              </template>
            </div>

          </lightning-layout-item>
          <lightning-layout-item  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
            <div class="slds-var-p-around_large">
              <template if:true={eventDetails.Location__c}>
                <strong>Event Location Map </strong>
                <lightning-map markers-title="Event Location" map-markers={mapMarkerdetails} zoom-level="15">

                </lightning-map>
                
    
              </template>
            </div>

          </lightning-layout-item>
          

        </lightning-layout>

        

        
        
          <lightning-layout>
            <lightning-layout-item  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
               <div class="slds-var-p-around_large eventorg contact">
                <div>
                  <img  src={eventDetails.Event_Organizer__r.Picture__c}>
                </div>
                <strong>Event Organizer</strong>
                <p>
                  {eventDetails.Event_Organizer__r.Name}
                </p>
  
                <p>
                  {eventDetails.Event_Organizer__r.Company__c}
                </p>
                <p>
                  {eventDetails.Event_Organizer__r.Short_Intro__c}
                </p>
              </div>
  
            </lightning-layout-item>
            
          </lightning-layout>
          <!-- <div class="speaker slds-var-p-around_large">
            <p class="titleCalse">
              Speakers
          </p>
            <template if:true={speakerDetails} for:each={speakerDetails} for:item="speaker" for:index="index">
              <lightning-layout key={speaker.Id}  padding="around-small" size="12" small-device-size="12" large-device-size="4" medium-device-size="6">
               
                <strong>{speaker.Speaker__r.Name}</strong>
                <strong>{speaker.Speaker__r.Company__c}</strong>

                
              </lightning-layout>
   
            </template>

          </div> -->

          <div class="custom-modal" if:true={__showContactModal} >
            <section role="dialog" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <h2 class="slds-text-heading_medium slds-hyphenate">Contact Us</h2>
                    </header>
                    <div class="slds-modal__content slds-var-p-around_medium">
                        <c-contact-us-component 
                            organizer-email={eventDetails.Event_Organizer__r.Email__c}
                            event-id={eventDetails.Id}
                            organizer-owner={eventDetails.Event_Organizer__r.OwnerId}
                            onsuccess={handleContactUsSuccess} 
                            oncancel={handleContactCancel} >
                        </c-contact-us-component>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </div>

        <div class="custom-modal" if:true={__showModal} >
          <section role="dialog" class="slds-modal slds-fade-in-open">
              <div class="slds-modal__container">
                  <header class="slds-modal__header">
                      <h2 class="slds-text-heading_medium slds-hyphenate">RSVP Now</h2>
                  </header>
                  <div class="slds-modal__content slds-var-p-around_medium">
                      <!-- eventId => event-id eventRecordId =? event-record-id
                          eventID => event-i-d -->
                      <c-rsvp-component event-id={eventDetails.Id} onsuccess={handleRsvpSuccess} oncancel={handleCancel} ></c-rsvp-component>
                  </div>
              </div>
          </section>
          <div class="slds-backdrop slds-backdrop_open"></div>
      </div>

         

       <div class="contact slds-var-p-around_large">
        <lightning-button variant="brand" icon-name="standard:email" label="Contact Us" title="Contact Us" 
            onclick={contactUsHandler}>
        </lightning-button>
        </div>
        
        
       
        
          
       



      </template>

    </div>

      

      
      <!-- event id- {eventId}
      source - {source} -->
    
</template>